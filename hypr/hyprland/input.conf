#############
### INPUT ###
#############
# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃ CẤU HÌNH INPUT - BÀN PHÍM/CHUỘT/TOUCHPAD/GESTURES (Thiết bị nhập liệu và tương tác) ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
# Tài liệu chính thức: https://wiki.hypr.land/Configuring/Variables/#input
# Phần này cấu hình các thiết bị input như bàn phím, chuột, touchpad, và cử chỉ (gestures).
# Bao gồm bố cục phím, độ nhạy, focus behavior, và tùy chỉnh per-device.
# Lưu ý quan trọng:
# - Các thay đổi input thường áp dụng ngay khi reload config (hyprctl reload), không cần relogin.
# - Tra thông tin thiết bị: Chạy 'hyprctl devices' để xem tên bàn phím/chuột/touchpad chính xác.
# - Nếu dùng laptop, ưu tiên cấu hình touchpad để tránh input lag hoặc cử chỉ không mong muốn.
# - Gợi ý: Kết hợp với fcitx5 (ở phần env vars) để xử lý input tiếng Việt/emoji mượt mà.
# - Debug: Nếu input không hoạt động, kiểm tra log bằng 'journalctl -b -u seatd' hoặc 'hyprctl monitors'.

input {
    # ===== BÀN PHÍM (Keyboard Layout & Options) =====
    # Các biến này định nghĩa bố cục phím, biến thể, và tùy chọn mở rộng.
    # - kb_layout: Bố cục chính (us: Mỹ/QWERTY, vi: Việt Nam, jp: Nhật, fr: Pháp...).
    # - kb_variant: Biến thể của layout (ví dụ: dvorak cho us, colemak...; để trống nếu không cần).
    # - kb_model: Model bàn phím cụ thể (pc105 cho desktop, thinkpad cho Lenovo...; để trống nếu không chắc).
    # - kb_options: Tùy chọn nâng cao (ví dụ: ctrl:nocaps để chuyển CapsLock thành Ctrl; grp:alt_shift_toggle để Alt+Shift đổi layout).
    # - kb_rules: Quy tắc tùy chỉnh (hiếm dùng, để trống trừ khi cần quy tắc XKB đặc biệt).
    # Gợi ý: Đối với người dùng Việt Nam, set kb_layout = us và dùng fcitx5-unikey để gõ tiếng Việt (không cần kb_layout=vi để tránh xung đột).
    kb_layout = us # Bố cục phím mặc định (us cho QWERTY chuẩn, dễ gõ code; thay vi nếu cần layout Việt Nam)
    kb_variant = # Biến thể layout (để trống nếu dùng chuẩn; ví dụ: intl cho us với dấu accent)
    kb_model = # Model bàn phím (để trống nếu không biết; ví dụ: pc105 cho bàn phím desktop 105 phím)
    kb_options = # Tùy chọn mở rộng (ví dụ: ctrl:nocaps để CapsLock thành Ctrl; grp:alt_shift_toggle để đổi layout nhanh)
    kb_rules = # Quy tắc cấu hình XKB (hiếm cần; để trống trừ khi tùy chỉnh sâu)
    # ===== CHUỘT & FOCUS (Mouse Sensitivity & Behavior) =====
    # Các biến này kiểm soát hành vi chuột và focus cửa sổ.
    # - follow_mouse: 0: Không focus theo chuột; 1: Focus cửa sổ khi rê chuột qua (tiện cho multi-monitor); 2: Focus nhưng giữ input cũ.
    # - sensitivity: Độ nhạy chuột (-1.0 đến 1.0; 0 = mặc định; dương để tăng tốc, âm để giảm - phù hợp chuột gaming DPI cao).
    # Gợi ý: follow_mouse=1 cho workflow nhanh; sensitivity=0 cho desktop, 0.2-0.3 cho trackpoint laptop.
    follow_mouse = 1 # 1: Focus tự động theo chuột (focus-follows-mouse, tiện đa màn hình); 0: Không focus trừ khi click
    sensitivity = 0.5 # Độ nhạy chuột (-1.0 ~ 1.0; 0 mặc định; -0.5 cho chuột gaming DPI cao, 0.3 cho trackpoint chậm)
    # ===== TOUCHPAD (Cấu hình Touchpad Laptop) =====
    # Block này dành riêng cho touchpad (nếu dùng desktop, có thể comment toàn bộ).
    # - natural_scroll: true: Cuộn ngược như macOS (ngón xuống = trang lên); false: Truyền thống Windows (ngón xuống = trang xuống).
    # - tap-to-click: true: Nhấn 1 ngón = click trái (mặc định true nếu không set).
    # - disable_while_typing: true: Tắt touchpad tạm thời khi gõ phím để tránh chạm nhầm.
    # - clickfinger_behavior: true: Click bằng số ngón (1=left, 2=right, 3=middle - giống multi-touch macOS).
    # - middle_button_emulation: true: Nhấn left+right = middle click (nếu cần).
    # - tap-and-drag: true: Bật kéo thả sau tap.
    # - drag_lock: 1: Bật drag lock với timeout (giữ drag sau lift finger, tiện kéo thả dài).
    # Gợi ý: natural_scroll=true cho quen macOS/GNOME; disable_while_typing=true để tránh palm rejection issues.
    # Lưu ý: Không có scroll_method riêng (mặc định twofinger qua libinput); click_method thay bằng clickfinger_behavior.
        touchpad {
        natural_scroll = true # true: Cuộn tự nhiên (macOS-like, ngón xuống = trang lên); false: Truyền thống (Windows-like)
        tap-to-click = true # true: Nhấn 1 ngón = click trái (giống macOS; false nếu muốn dùng nút vật lý)
        disable_while_typing = true # true: Tắt touchpad khi gõ phím (tránh chạm nhầm, palm rejection như macOS)
        clickfinger_behavior = true # true: Click bằng số ngón (1=left, 2=right, 3=middle - giống multi-touch macOS)
        middle_button_emulation = true # true: Nhấn left+right = middle click (tùy chỉnh giống macOS)
        tap-and-drag = true # true: Bật kéo thả sau tap (giống macOS drag)
        drag_lock = 2 # 1: Bật drag lock với timeout (giữ drag sau lift finger, tiện cho kéo thả dài); 0: tắt, 2: sticky
        }
}
# =============================
# GESTURES (Cử chỉ touchpad/màn hình cảm ứng)
# =============================
# Block này cấu hình cử chỉ đa ngón cho touchpad hoặc màn hình cảm ứng.
# - workspace_swipe: true: Bật vuốt để chuyển workspace (3-4 ngón ngang).
# - swipe_distance: Độ dài vuốt tối thiểu (pixel; mặc định 200, tăng nếu vuốt khó nhận).
# - workspace_swipe_fingers: Số ngón để vuốt (3 hoặc 4; 3 cho dễ dùng).
# Gợi ý: Bật nếu dùng laptop touchpad lớn; kết hợp với workspace config để swipe mượt.
# Lưu ý: Chỉ hoạt động nếu driver touchpad hỗ trợ (libinput hoặc synaptics).
# Cải tiến để giống macOS: Bật đầy đủ gestures, dùng 3 ngón cho swipe workspace (giống Mission Control), điều chỉnh distance cho nhạy hơn.
gestures {
workspace_swipe = true # true: Bật vuốt đa ngón để chuyển workspace (quen GNOME/macOS); false: Tắt để tránh vuốt nhầm
workspace_swipe_fingers = 3 # Số ngón tay để vuốt (3: dễ dùng như macOS; 4: chính xác hơn, tránh nhầm)
workspace_swipe_distance = 250 # Độ dài vuốt tối thiểu (pixel; tăng lên 250 để dễ trigger hơn, giống macOS nhạy)
workspace_swipe_invert = true # true: Đảo chiều vuốt (vuốt trái = workspace tiếp theo, giống macOS natural)
workspace_swipe_min_speed_to_force = 30 # Tốc độ vuốt tối thiểu để force swipe (giảm để mượt hơn)
workspace_swipe_cancel_ratio = 0.35 # Tỷ lệ hủy vuốt (điều chỉnh để tránh cancel nhầm)
}

# =============================
# CẤU HÌNH RIÊNG TỪNG THIẾT BỊ (Per-device Configuration)
# =============================
# Phần này cho phép tùy chỉnh riêng cho từng thiết bị input (bàn phím/chuột/touchpad).
# - name: Tên chính xác của thiết bị (tra bằng 'hyprctl devices | grep name'; case-sensitive).
# - Sau đó set các biến như sensitivity, kb_layout... chỉ áp dụng cho thiết bị đó.
# Hữu ích cho: Chuột gaming (giảm sensitivity), bàn phím phụ (đổi layout), touchpad external.
# Thêm nhiều block device {} nếu có nhiều thiết bị.
# Ví dụ: Chuột gaming giảm nhạy, bàn phím phụ set layout Việt.
device {
    name = epic-mouse-v1 # Tên thiết bị chính xác (ví dụ: chuột gaming; tra bằng hyprctl devices)
    sensitivity = -0.5 # Giảm nhạy 50% cho thiết bị này (phù hợp DPI cao; không ảnh hưởng thiết bị khác)
}
device {
    name = external-keyboard # Tên bàn phím phụ (ví dụ: keyboard USB external)
    kb_layout = vi # Set layout Việt Nam chỉ cho bàn phím này (us cho bàn phím chính)
    kb_options = grp:alt_shift_toggle # Alt+Shift đổi layout chỉ cho thiết bị này
}
# Thêm block device {} cho mỗi thiết bị muốn tùy biến (ví dụ: touchpad set natural_scroll=true riêng)

# =============================
# GỢI Ý TỐI ƯU & TIP NHANH
# =============================
# ▸ Bàn phím đa ngôn ngữ: kb_layout = us, kb_options = grp:alt_shift_toggle (Alt+Shift đổi us/vi); kết hợp fcitx5-unikey cho input tiếng Việt mượt.
# ▸ Chuột laptop/trackpoint: sensitivity = 0.2~0.3 để tăng tốc (nếu chậm); follow_mouse=1 cho focus nhanh.
# ▸ Touchpad như macOS: natural_scroll = true, workspace_swipe = true, disable_while_typing = true.
# ▸ Multi-device: Luôn tra tên bằng 'hyprctl devices' trước khi set device {}; sai tên sẽ không áp dụng.
# ▸ Debug input: Chạy 'libinput debug-events' để test touchpad/chuột; 'xev' cho bàn phím (dù Wayland, xev vẫn chạy qua XWayland).
# ▸ Pro Tips - Siêu Optimize:
#   - Gaming: sensitivity = -0.7 cho chuột DPI 1600+; thêm accel_profile = flat (trong device {}) để no-accel.
#   - Laptop battery: disable_while_typing = true để tiết kiệm pin (tắt touchpad idle).
#   - Custom gestures: workspace_swipe_fingers = 4 để tránh nhầm với scroll; thêm swipe_invert = false nếu vuốt ngược.
#   - Advanced: Thêm kb_options = compose:ralt để Right Alt thành Compose key (gõ ký tự đặc biệt như é, ñ).
#   - Nhớ: Input config ưu tiên lightweight - tránh over-config để giữ latency thấp!