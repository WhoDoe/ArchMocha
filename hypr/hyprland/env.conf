#############################
### ENVIRONMENT VARIABLES ###
#############################
# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃ BIẾN MÔI TRƯỜNG - ENVIRONMENT VARIABLES (Cấu hình toàn cục cho Hyprland và ứng dụng) ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
# Tài liệu chính thức: https://wiki.hypr.land/Configuring/Environment-variables/
# Phần này định nghĩa các biến môi trường (env vars) để tùy chỉnh hành vi của Hyprland, Wayland, và các ứng dụng liên quan.
# Biến env ảnh hưởng đến input, output, theme, GPU, audio, v.v. Chúng được áp dụng khi Hyprland khởi động.
# Lưu ý quan trọng:
# - Biến env cần được đặt trước khi các ứng dụng chạy, nên đặt ở đây hoặc trong ~/.profile / ~/.bashrc.
# - Sau khi thay đổi, cần relogin (đăng xuất/đăng nhập lại) hoặc restart Hyprland để áp dụng.
# - Chỉ thêm biến thực sự cần thiết để tránh xung đột hoặc làm chậm hệ thống.
# - Để test nhanh: Chạy 'export VAR=VALUE' trong terminal, sau đó mở app để kiểm tra.

# ==================== CON TRỎ CHUỘT (Cursor Size & Theme) ====================
# Các biến này kiểm soát kích thước và theme con trỏ chuột, đảm bảo đồng bộ giữa Wayland và XWayland.
# - XCURSOR_SIZE: Kích thước chuẩn cho con trỏ (24 phù hợp với màn FHD/2K; tăng lên 32-48 cho 4K/HiDPI).
# - HYPRCURSOR_SIZE: Dành riêng cho Hyprcursor nếu dùng theme động hoặc custom (giữ đồng bộ với XCURSOR_SIZE).
env = XCURSOR_SIZE,24 # Kích thước con trỏ chuột chuẩn (tăng nếu màn hình lớn, ví dụ: 32 cho QHD)
env = HYPRCURSOR_SIZE,24 # Kích thước cho Hyprcursor (nếu dùng package hyprcursor với theme tùy chỉnh)

# ==================== INPUT METHOD (fcitx5, emoji, tiếng Việt) ====================
# Các biến này đảm bảo bộ gõ (IME) như fcitx5 hoạt động tốt với các framework khác nhau.
# - QT_IM_MODULE: Cho ứng dụng Qt (như KDE apps, VLC) hỗ trợ input tiếng Việt/emoji.
# - XMODIFIERS: Cho ứng dụng XWayland (cũ hơn, nhưng cần cho một số app không native Wayland).
# - SDL_IM_MODULE & GLFW_IM_MODULE: Cho game/engine như SDL/GLFW (Unity, Godot) hỗ trợ input.
# env = GTK_IM_MODULE,fcitx # Comment vì GTK thường tự nhận fcitx5; bật nếu gặp vấn đề input ở GTK apps (như GIMP, Inkscape).
env = QT_IM_MODULE,fcitx # Hỗ trợ input cho ứng dụng Qt (tích hợp fcitx5 để gõ tiếng Việt, emoji)
env = XMODIFIERS,@im=fcitx # Cho ứng dụng chạy qua XWayland (đảm bảo IME hoạt động ở app cũ)
env = SDL_IM_MODULE,fcitx # Hỗ trợ input cho ứng dụng/game dùng SDL (ví dụ: Steam games)
env = GLFW_IM_MODULE,fcitx # Hỗ trợ input cho ứng dụng/game dùng GLFW (ví dụ: Minecraft, custom apps)

# ==================== PIPEWIRE/AUDIO/BLUETOOTH (Âm thanh & Độ trễ) ====================
# Các biến này tối ưu hóa PipeWire (audio server mặc định cho Wayland), giảm latency cho recording/gaming.
# - PIPEWIRE_LATENCY: Định dạng 'samples/sample_rate' (256/48000 là cân bằng; giảm samples để latency thấp hơn, nhưng có thể gây underrun nếu CPU yếu).
# - PULSE_LATENCY_MSEC: Cho compatibility với PulseAudio (nếu dùng pipewire-pulse).
env = PIPEWIRE_LATENCY,256/48000 # Giảm độ trễ âm thanh PipeWire (tùy chỉnh theo card âm thanh; thử 128/48000 cho low-latency)
# env = PIPEWIRE_RUNTIME_DIR,/run/user/1000/pipewire # Không cần nếu dùng systemd-user (PipeWire tự detect)
# env = PULSE_LATENCY_MSEC,30 # Tùy chọn cho PulseAudio compat (giảm latency nếu dùng ALSA/Pulse legacy)

# ==================== WAYLAND/FIREFOX/CHROME/GPU (Tối ưu Browser & Hardware) ====================
# Các biến này buộc browser chạy native Wayland, tận dụng GPU, và tối ưu backend.
# - MOZ_ENABLE_WAYLAND: Buộc Firefox/Chrome dùng Wayland (mượt hơn, ít lag hơn XWayland).
# - MOZ_WEBRENDER: Bật rendering GPU cho Firefox (tăng tốc web, đặc biệt với animation/CSS).
# - MOZ_DISABLE_RDD_SANDBOX: Fix lỗi sandbox ở Firefox Dev Edition (chỉ bật nếu gặp crash).
# - NVD_BACKEND: Tối ưu NVIDIA driver cho Wayland (giảm tearing, chỉ dùng nếu có card NVIDIA).
# - QT_QPA_PLATFORM: Ưu tiên Wayland cho Qt apps (hạn chế fallback về X11).
# - QT_QPA_PLATFORMTHEME: Sử dụng qt5ct để quản lý theme/icon Qt, đồng bộ với GTK.
env = MOZ_ENABLE_WAYLAND,1 # Buộc Firefox/Chrome chạy native Wayland (tăng hiệu suất, giảm lag input)
env = MOZ_WEBRENDER,1 # Bật WebRender GPU acceleration cho Firefox (mượt hơn với web heavy)
env = MOZ_DISABLE_RDD_SANDBOX,1 # Vô hiệu hóa sandbox RDD nếu gặp lỗi ở Firefox (chỉ bật khi cần, có rủi ro bảo mật)
env = NVD_BACKEND,direct # Tối ưu backend cho NVIDIA GPU dưới Wayland (giảm tearing, chỉ dùng với card NVIDIA)
env = QT_QPA_PLATFORM,wayland # Ưu tiên platform Wayland cho ứng dụng Qt (tránh XWayland fallback)
env = QT_QPA_PLATFORMTHEME,qt5ct # Quản lý theme/icon cho Qt apps qua qt5ct (đồng bộ cursor, font, color)

# ==== ĐỒNG BỘ THEME SAKURA NEON PASTEL CATPPUCCIN (Theme & Icon) ====
# Các biến này ép theme Catppuccin-Mocha-Mauve cho GTK, icon, cursor để đồng bộ ricing.
# - GTK_THEME: Theme cho GTK apps (Gnome-based, như Nautilus).
# - GTK_ICON_THEME: Icon set đồng bộ.
# - XCURSOR_THEME: Cursor theme (đồng bộ với XCURSOR_SIZE).
# Lưu ý: Cài đặt theme Catppuccin trước (qua AUR hoặc git); dùng lxappearance để preview/test.
env = GTK_THEME,catppuccin-mocha-mauve-standard+default # Theme GTK Catppuccin Mocha variant Mauve (dark mode, pastel neon)
env = GTK_ICON_THEME,Catppuccin-Mocha # Icon theme Catppuccin Mocha (đồng bộ icon app/systray)
env = XCURSOR_THEME,Catppuccin-Mocha # Cursor theme Catppuccin Mocha (hiệu ứng neon pastel)
# === Lưu ý Theme ===
# - Variant "Mauve" là phần của Catppuccin-Mocha; chọn đúng tên trong lxappearance/qt5ct: Catppuccin-Mocha-Standard-Mauve-Dark.
# - Nếu chuyển sang variant khác (Macchiato/Frappe/Latte): Thay tên gói và biến env tương ứng (ví dụ: Catppuccin-Frappe).
# env = QT_STYLE_OVERRIDE,kvantum # Tùy chọn: Ép style Qt dùng Kvantum (nếu cài Kvantum và có theme Catppuccin cho nó)

# ==================== FONT RENDERING (Chất lượng Font) ====================
# Biến này cải thiện rendering font, làm chữ mịn hơn (interpreter-version=40 là modern, tốt cho subpixel).
env = FREETYPE_PROPERTIES,truetype:interpreter-version=40 # Cải thiện rendering font (mịn hơn, giảm aliasing)

# ==================== HI-DPI/SCALING (Màn hình lớn/4K) ====================
# Các biến này scale UI cho HiDPI (màn hình độ phân giải cao).
# - GDK_SCALE: Scale cho GTK apps (2 = 200%, phù hợp 4K).
# - GDK_DPI_SCALE: Fine-tune DPI nếu scale không khớp.
# - QT_SCALE_FACTOR: Scale cho Qt apps.
# Lưu ý: Hyprland có scale riêng trong config (monitor section); dùng env cho per-app nếu cần.
# env = GDK_SCALE,2 # Scale 200% cho GTK apps trên HiDPI (bật nếu font/icon nhỏ)
# env = GDK_DPI_SCALE,0.5 # Fine-tune DPI scale cho GTK (thử 0.5-1.5 tùy màn)
# env = QT_SCALE_FACTOR,2 # Scale 200% cho Qt apps trên HiDPI

# ==================== THEME/STYLE (Tùy chọn thêm) ====================
# Các biến này ép theme nếu không dùng lxappearance/qt5ct.
# env = GTK_THEME,Catppuccin-Mocha # Ép theme GTK (nếu không dùng biến trên)
# env = XCURSOR_THEME,Bibata-Modern-Ice # Thay cursor theme khác (ví dụ: Bibata cho style modern)
# env = QT_STYLE_OVERRIDE,kvantum # Ép Qt dùng Kvantum style (nếu cài và config Kvantum)

# ==================== DEBUG/PHÁT TRIỂN (Chỉ bật khi cần debug) ====================
# Các biến này fix lỗi cụ thể, không nên bật mặc định.
# - WLR_NO_HARDWARE_CURSORS: Fix cursor invisible trên NVIDIA/AMD driver cũ.
# - GDK_BACKEND: Buộc GTK dùng Wayland (nếu app fallback X11).
# env = WLR_NO_HARDWARE_CURSORS,1 # Fix lỗi cursor không hiển thị (chỉ bật nếu driver GPU có vấn đề)
# env = GDK_BACKEND,wayland # Buộc GTK apps chạy Wayland (tránh XWayland nếu có lỗi)

# ==================== LƯU Ý & TIPS ====================
# ▸ Chỉ giữ biến cần thiết: Quá nhiều env có thể gây xung đột hoặc làm chậm khởi động (kiểm tra bằng 'printenv | grep ^env').
# ▸ Thay đổi env cần relogin: Chạy 'hyprctl reload' chỉ reload config, không reload env.
# ▸ Test nhanh: Export biến trong shell (export VAR=VALUE), sau đó chạy app để kiểm tra (không ảnh hưởng toàn cục).
# ▸ Debug: Nếu app không nhận env, kiểm tra bằng 'env | grep VAR' trong app's terminal.
# ▸ Pro Tips: 
#   - Đồng bộ theme: Sử dụng lxappearance (GTK) và qt5ct (Qt) để set visually, sau đó export env từ đó.
#   - GPU-specific: Với Intel/AMD, thử thêm env = __GLX_VENDOR_LIBRARY_NAME,mesa để tối ưu OpenGL.
#   - Audio advanced: Nếu latency cao, dùng 'pw-top' để monitor PipeWire, điều chỉnh latency động.
#   - HiDPI mixed: Nếu multi-monitor với DPI khác nhau, dùng Hyprland's per-monitor scale thay vì env global.
# ▸ Gợi ý thêm: env = CLUTTER_BACKEND,wayland (cho Clutter apps); env = ELECTRON_OZONE_PLATFORM_HINT,auto (cho Electron apps như VSCode chạy Wayland).