###################
### KEYBINDINGS ###
###################
# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃ PHÍM TẮT HYPRLAND (KEYBINDINGS) - Cấu hình phím tắt cho các hành động nhanh, mở app, quản lý cửa sổ, media, v.v. ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
# Tài liệu chính thức: https://wiki.hypr.land/Configuring/Keywords/#binds
# Phần này định nghĩa các phím tắt (binds) sử dụng lệnh 'bind' hoặc 'bindm' (cho chuột), 'bindl' (cho lock/media), 'bindel' (cho âm lượng/độ sáng).
# Cú pháp cơ bản: bind = [modifier], key, dispatcher, [arg]
# - $mainMod: Modifier chính (SUPER = Win key; có thể dùng CTRL, ALT, SHIFT).
# - Đảm bảo cài đặt các app cần thiết: kitty/alacritty (terminal), thunar/nautilus (file manager), wofi/rofi (launcher), firefox/brave (browser), code/vscode (editor), libreoffice (office), wdisplays/arandr (display manager), grim/slurp/wl-clipboard (screenshot), wpctl (volume), playerctl (media), brightnessctl (brightness).
# - Các bind được nhóm theo chức năng để dễ quản lý và tùy chỉnh.
# Lưu ý quan trọng:
# - Phím tắt chỉ hoạt động trong Hyprland session; reload config bằng 'hyprctl reload' để áp dụng thay đổi mà không restart.
# - Nếu xung đột phím (ví dụ: app khác dùng cùng key), ưu tiên unbind hoặc đổi key.
# - bindel/bindl: Dùng cho phím hardware (như volume keys), với 'e' cho edge-triggered (âm lượng tăng/giảm dần), 'l' cho lock (media play/pause).
# - bindm: Dành cho chuột (movewindow/resizewindow).
# - Debug: Nếu phím không hoạt động, kiểm tra bằng 'hyprctl getoption binds' hoặc log '~/.hypr/hyprland.log'.
# - Pro Tips: Sử dụng biến như $terminal = kitty để dễ thay đổi app mặc định; thêm submap cho multi-layer binds (ví dụ: resize mode).

$mainMod = SUPER # Modifier chính (SUPER = Win key; có thể đổi thành CTRL+ALT nếu thích)

# ======= 1. MỞ NHANH ỨNG DỤNG CHÍNH (Core Apps) =======
# Các bind này dùng bash script để check và mở app ưu tiên (riced nhất trước, fallback nếu không cài).
# Ưu điểm: Tự động thích ứng hệ thống; dễ chỉnh sửa thứ tự.
# Gợi ý: Để tối ưu, định nghĩa biến như $terminal = kitty ở đầu config, rồi bind = $mainMod, SPACE, exec, $terminal.
# 1. Terminal (Ưu tiên: kitty > cool-retro-term > wezterm > alacritty > ... > xterm; fallback notify nếu không có).
bind = $mainMod, SPACE, exec, bash -c 'command -v kitty >/dev/null && exec kitty || command -v cool-retro-term >/dev/null && exec cool-retro-term || command -v wezterm >/dev/null && exec wezterm || command -v alacritty >/dev/null && exec alacritty || command -v tilix >/dev/null && exec tilix || command -v konsole >/dev/null && exec konsole || command -v gnome-terminal >/dev/null && exec gnome-terminal || command -v terminator >/dev/null && exec terminator || command -v qterminal >/dev/null && exec qterminal || command -v xfce4-terminal >/dev/null && exec xfce4-terminal || command -v lxterminal >/dev/null && exec lxterminal || command -v foot >/dev/null && exec foot || command -v st >/dev/null && exec st || command -v urxvt >/dev/null && exec urxvt || command -v xterm >/dev/null && exec xterm || command -v eterm >/dev/null && exec eterm || notify-send "Không tìm thấy terminal nào trên hệ thống!"' # Mở terminal mặc định (SUPER+SPACE; tiện như Alt+F2 nhưng cho shell)
# 2. File Manager (Ưu tiên: thunar > nautilus > dolphin > ... > lf).
bind = $mainMod, E, exec, bash -c 'command -v thunar >/dev/null && exec thunar || command -v nautilus >/dev/null && exec nautilus || command -v dolphin >/dev/null && exec dolphin || command -v pcmanfm >/dev/null && exec pcmanfm || command -v caja >/dev/null && exec caja || command -v nemo >/dev/null && exec nemo || command -v ranger >/dev/null && exec ranger || command -v lf >/dev/null && exec lf || notify-send "Không tìm thấy file manager nào trên hệ thống!"' # Mở file manager (SUPER+E; như Explorer trên Windows)
# 3. Launcher (App Menu) (Ưu tiên: wofi > rofi > fuzzel).
bind = $mainMod, R, exec, bash -c 'command -v wofi >/dev/null && exec wofi --show drun || command -v rofi >/dev/null && exec rofi -show drun || command -v fuzzel >/dev/null && exec fuzzel || notify-send "Không tìm thấy app launcher nào trên hệ thống!"' # Mở menu app (SUPER+R; drun mode để tìm/run app)
# 4. Web Browser (Ưu tiên: firefox > brave > chromium > ... > midori).
bind = $mainMod, W, exec, bash -c 'command -v firefox >/dev/null && exec firefox || command -v brave >/dev/null && exec brave || command -v chromium >/dev/null && exec chromium || command -v google-chrome >/dev/null && exec google-chrome || command -v qutebrowser >/dev/null && exec qutebrowser || command -v vivaldi >/dev/null && exec vivaldi || command -v epiphany >/dev/null && exec epiphany || command -v midori >/dev/null && exec midori || notify-send "Không tìm thấy trình duyệt nào trên hệ thống!"' # Mở browser (SUPER+W; web access nhanh)
# 5. Code Editor (Ưu tiên: code > code-oss > codium > ... > nvim in kitty).
bind = $mainMod, C, exec, bash -c 'command -v code >/dev/null && exec code || command -v code-oss >/dev/null && exec code-oss || command -v codium >/dev/null && exec codium || command -v vscodium >/dev/null && exec vscodium || command -v sublime_text >/dev/null && exec sublime_text || command -v atom >/dev/null && exec atom || command -v gedit >/dev/null && exec gedit || command -v micro >/dev/null && exec micro || command -v vim >/dev/null && exec kitty vim || command -v nvim >/dev/null && exec kitty nvim || notify-send "Không tìm thấy code editor nào trên hệ thống!"' # Mở editor code (SUPER+C; cho dev workflow)
# 6. LibreOffice Writer / Office Editor (Ưu tiên: libreoffice > onlyoffice > abiword).
bind = $mainMod, O, exec, bash -c 'command -v libreoffice >/dev/null && exec libreoffice --writer || command -v onlyoffice-desktopeditors >/dev/null && exec onlyoffice-desktopeditors || command -v abiword >/dev/null && exec abiword || command -v wordgrinder >/dev/null && exec wordgrinder || notify-send "Không tìm thấy trình soạn thảo văn bản nào trên hệ thống!"' # Mở word processor (SUPER+O; office-like)
# 7. Kết nối màn hình ngoài / Display Manager (Ưu tiên: wdisplays > gnome-network-displays > deskreen > arandr).
bind = $mainMod, K, exec, bash -c 'command -v wdisplays >/dev/null && exec wdisplays || command -v gnome-network-displays >/dev/null && exec gnome-network-displays || command -v deskreen >/dev/null && exec deskreen || command -v arandr >/dev/null && exec arandr || notify-send "Không tìm thấy trình quản lý màn hình hoặc chiếu không dây!"' # Mở công cụ quản lý display (SUPER+K; cho multi-monitor hoặc cast)

# ======= 2. ĐÓNG CỬA SỔ, LOGOUT, SHUTDOWN (System Controls) =======
# Các bind này quản lý session và power.
# - killactive: Đóng cửa sổ active (như Alt+F4).
# - exit: Logout Hyprland (về login manager).
# - shutdown: Tắt máy (cần quyền sudo nếu không set polkit).
bind = $mainMod, L, exec, hyprlock # Khóa màn hình (SUPER+L; dùng hyprlock cho ricing)
bind = $mainMod, Q, killactive, # Đóng cửa sổ đang focus (SUPER+Q; tương tự Alt+F4)
bind = $mainMod SHIFT, ESCAPE, exit, # Logout Hyprland (SUPER+SHIFT+ESC; về DM như SDDM/GDM)
bind = $mainMod SHIFT, RETURN, exec, shutdown now # Tắt máy ngay (SUPER+SHIFT+ENTER; cẩn thận, mất data nếu chưa save! Gợi ý: Thay bằng 'systemctl poweroff' nếu dùng systemd)

# ======= 3. CỬA SỔ: FULLSCREEN, FLOAT, PSEUDO, SPLIT (Window Management) =======
# Các bind này thay đổi trạng thái cửa sổ.
# - fullscreen: Toàn màn hình (toggle).
# - togglefloating: Chuyển giữa floating (di chuyển tự do) và tiling (auto arrange).
# - pseudo: Pseudotile (resize nhưng giữ vị trí tiling).
# - togglesplit: Đổi hướng split trong dwindle layout (horizontal/vertical).
bind = $mainMod, F, fullscreen, # Toggle fullscreen cho cửa sổ active (SUPER+F)
bind = $mainMod, V, togglefloating, # Toggle floating mode (SUPER+V; tiện cho popup/dialog)
bind = $mainMod, P, pseudo, # Toggle pseudotile (SUPER+P; resize mà không float hoàn toàn)
bind = $mainMod, J, togglesplit, # Toggle split direction (SUPER+J; chỉ cho dwindle layout)

# ======= 4. CHỤP MÀN HÌNH VÙNG CHỌN (Screenshot) =======
# Sử dụng grim (capture), slurp (select region), wl-copy (clipboard).
# - Print: Chụp vùng chọn → copy clipboard.
# Gợi ý: Thêm bind cho full screen: bind = $mainMod, Print, exec, grim - | wl-copy.
bind = ,Print, exec, grim -g "$(slurp)" - | wl-copy # Phím Print: Chọn vùng chụp → copy clipboard (dễ paste)
# Gợi ý: SHIFT+Print để lưu file:
# bind = SHIFT, Print, exec, grim ~/Pictures/$(date +%F_%T)_area.png # Lưu screenshot vào Pictures với timestamp

# ======= 5. DI CHUYỂN FOCUS (PHÍM MŨI TÊN) (Focus Navigation) =======
# Di chuyển focus giữa các cửa sổ bằng phím mũi tên (l: left, r: right, u: up, d: down).
# Gợi ý: Kết hợp với follow_mouse=1 ở input section để focus theo chuột.
bind = $mainMod, left, movefocus, l # Focus cửa sổ bên trái (SUPER+Left)
bind = $mainMod, right, movefocus, r # Focus cửa sổ bên phải (SUPER+Right)
bind = $mainMod, up, movefocus, u # Focus cửa sổ bên trên (SUPER+Up)
bind = $mainMod, down, movefocus, d # Focus cửa sổ bên dưới (SUPER+Down)

# ======= 6. WORKSPACE BẰNG SỐ (SUPER+1…0) (Workspace Switching) =======
# Chuyển sang workspace số (1-10; 0 cho 10).
# Gợi ý: Hyprland hỗ trợ đến 10 workspace mặc định; có thể tăng ở general:workspace_count.
bind = $mainMod, 1, workspace, 1 # Chuyển sang workspace 1 (SUPER+1)
bind = $mainMod, 2, workspace, 2 # Chuyển sang workspace 2 (SUPER+2)
bind = $mainMod, 3, workspace, 3 # Chuyển sang workspace 3 (SUPER+3)
bind = $mainMod, 4, workspace, 4 # Chuyển sang workspace 4 (SUPER+4)
bind = $mainMod, 5, workspace, 5 # Chuyển sang workspace 5 (SUPER+5)
bind = $mainMod, 6, workspace, 6 # Chuyển sang workspace 6 (SUPER+6)
bind = $mainMod, 7, workspace, 7 # Chuyển sang workspace 7 (SUPER+7)
bind = $mainMod, 8, workspace, 8 # Chuyển sang workspace 8 (SUPER+8)
bind = $mainMod, 9, workspace, 9 # Chuyển sang workspace 9 (SUPER+9)
bind = $mainMod, 0, workspace, 10 # Chuyển sang workspace 10 (SUPER+0)

# ======= 7. ĐƯA CỬA SỔ SANG WORKSPACE KHÁC (SUPER+SHIFT+SỐ) (Move Window to Workspace) =======
# Di chuyển cửa sổ active sang workspace số (giữ focus theo).
bind = $mainMod SHIFT, 1, movetoworkspace, 1 # Di chuyển cửa sổ sang workspace 1 (SUPER+SHIFT+1)
bind = $mainMod SHIFT, 2, movetoworkspace, 2 # Di chuyển cửa sổ sang workspace 2 (SUPER+SHIFT+2)
bind = $mainMod SHIFT, 3, movetoworkspace, 3 # Di chuyển cửa sổ sang workspace 3 (SUPER+SHIFT+3)
bind = $mainMod SHIFT, 4, movetoworkspace, 4 # Di chuyển cửa sổ sang workspace 4 (SUPER+SHIFT+4)
bind = $mainMod SHIFT, 5, movetoworkspace, 5 # Di chuyển cửa sổ sang workspace 5 (SUPER+SHIFT+5)
bind = $mainMod SHIFT, 6, movetoworkspace, 6 # Di chuyển cửa sổ sang workspace 6 (SUPER+SHIFT+6)
bind = $mainMod SHIFT, 7, movetoworkspace, 7 # Di chuyển cửa sổ sang workspace 7 (SUPER+SHIFT+7)
bind = $mainMod SHIFT, 8, movetoworkspace, 8 # Di chuyển cửa sổ sang workspace 8 (SUPER+SHIFT+8)
bind = $mainMod SHIFT, 9, movetoworkspace, 9 # Di chuyển cửa sổ sang workspace 9 (SUPER+SHIFT+9)
bind = $mainMod SHIFT, 0, movetoworkspace, 10 # Di chuyển cửa sổ sang workspace 10 (SUPER+SHIFT+0)

# ======= 8. WORKSPACE ĐẶC BIỆT/SCRATCHPAD (Special Workspaces) =======
# Special workspace: Ẩn/hiện như scratchpad (dùng cho app tạm như calc, note).
# - togglespecialworkspace: Toggle show/hide.
# - movetoworkspace special: Di chuyển cửa sổ vào special.
bind = $mainMod, S, togglespecialworkspace, magic # Toggle special workspace 'magic' (SUPER+S; như scratchpad)
bind = $mainMod SHIFT, S, movetoworkspace, special:magic # Di chuyển cửa sổ active vào special 'magic' (SUPER+SHIFT+S)

# ======= 9. LƯỚT WORKSPACE (SUPER + CUỘN CHUỘT) (Workspace Scrolling) =======
# Chuyển workspace bằng cuộn chuột (e+1: next, e-1: prev).
# Gợi ý: Kết hợp với gestures.workspace_swipe ở input section cho touchpad.
bind = $mainMod, mouse_down, workspace, e+1 # Cuộn xuống: Chuyển workspace tiếp theo
bind = $mainMod, mouse_up, workspace, e-1 # Cuộn lên: Chuyển workspace trước

# ======= 10. KÉO VÀ RESIZE CỬA SỔ BẰNG CHUỘT (Mouse Binds) =======
# bindm: Bind với chuột (272: LMB, 273: RMB).
bindm = $mainMod, mouse:272, movewindow # Di chuyển cửa sổ bằng chuột trái + SUPER (drag)
bindm = $mainMod, mouse:273, resizewindow # Resize cửa sổ bằng chuột phải + SUPER (drag)

# ======= 11. PHÍM CỨNG LAPTOP: ÂM LƯỢNG, MIC, ĐỘ SÁNG (Hardware Keys - Volume/Brightness) =======
# bindel: Cho phím edge-triggered (tăng/giảm dần khi giữ).
# - wpctl: Quản lý volume/mute qua PipeWire.
# - brightnessctl: Quản lý backlight (cần cài và set permission nếu cần).
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+ # Tăng volume 5% (phím Volume Up; -l 1 giới hạn max 100%)
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- # Giảm volume 5% (phím Volume Down)
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle # Toggle mute loa (phím Mute)
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle # Toggle mute mic (phím Mic Mute)
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+ # Tăng độ sáng 5% (phím Brightness Up; -e4 -n2 cho smooth transition)
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%- # Giảm độ sáng 5% (phím Brightness Down)

# ======= 12. ĐIỀU KHIỂN MEDIA (playerctl) (Media Controls) =======
# bindl: Cho phím lock (play/pause/next/prev).
# - playerctl: Quản lý media player (Spotify, VLC, browser...).
bindl = ,XF86AudioNext, exec, playerctl next # Next track (phím Next)
bindl = ,XF86AudioPause, exec, playerctl play-pause # Pause (phím Pause)
bindl = ,XF86AudioPlay, exec, playerctl play-pause # Play/Pause (phím Play)
bindl = ,XF86AudioPrev, exec, playerctl previous # Previous track (phím Prev)

# ======= 13. TEMPLATE & GỢI Ý CUSTOM SHORTCUT (Custom Binds) =======
# Ví dụ custom: Thêm phím tắt cho app thường dùng (uncomment để dùng).
# bind = $mainMod, T, exec, telegram-desktop # Mở Telegram (SUPER+T)
# bind = $mainMod, G, exec, gimp # Mở GIMP (SUPER+G; image editor)
# bind = $mainMod, B, exec, brave-browser # Mở Brave (SUPER+B; alternative browser)
# Gợi ý thêm:
# - bind = $mainMod, M, exec, spotify # Mở Spotify (SUPER+M)
# - bind = $mainMod, N, exec, kitty -e nvim # Mở Neovim trong terminal (SUPER+N)
# - bind = $mainMod SHIFT, Q, exec, killall waybar # Reload Waybar nếu lag (SUPER+SHIFT+Q)
# - Submap example: Tạo mode resize (bind = $mainMod, R, submap, resize; rồi trong submap bind phím mũi tên để resize).

# =============================
# GỢI Ý TỐI ƯU & TIP NHANH (Optimization Tips)
# =============================
# ▸ Sắp xếp nhóm logic: Giữ cấu trúc nhóm để dễ edit (app mở nhanh ở trên, system controls dưới).
# ▸ Ưu tiên phím dễ bấm: SUPER+chữ cái liên quan (E=Explorer, W=Web, C=Code) cho intuitiveness.
# ▸ Tránh xung đột: Kiểm tra phím hardware bằng 'xev' (dù Wayland, chạy qua XWayland); unbind nếu cần bằng 'unbind = key'.
# ▸ Custom script: Đối với bash dài, lưu vào file riêng như ~/.local/bin/open-terminal.sh rồi exec script đó.
# ▸ Pro Tips - Siêu Rice:
#   - Thêm animation bind: bind = $mainMod, A, exec, hyprctl keyword animation "fade,1,7,default" (toggle fade anim).
#   - Multi-monitor: bind = $mainMod, M, movetoworkspace, m:1 (di chuyển đến monitor khác).
#   - Scratchpad advanced: Định nghĩa nhiều special workspace (special:calc, special:music) cho app cụ thể.
#   - Debug binds: Chạy 'hyprctl binds' để list all binds; nếu không trigger, check modifier đúng (SUPER không bị remap).
#   - Optimize: Giữ binds nhẹ, tránh exec heavy script; dùng dispatcher Hyprland thay script bash nếu có thể.
# ▸ Nhớ: Binds là core của workflow - tùy chỉnh theo thói quen để "feel glass" (mượt mà)!